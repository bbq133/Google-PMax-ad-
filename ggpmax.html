<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #36c0a0; -webkit-text-stroke: #36c0a0}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #d4d4d4; -webkit-text-stroke: #d4d4d4}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #b76ff7; -webkit-text-stroke: #b76ff7}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #a34f83; -webkit-text-stroke: #a34f83}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #ee2e38; -webkit-text-stroke: #ee2e38}
    span.s1 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s2 {font-kerning: none; background-color: #171818}
    span.s3 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s4 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s5 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s6 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s7 {font-kerning: none}
    span.s8 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s9 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
    span.s10 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s11 {font-kerning: none; color: #ee2e38; background-color: #171818; -webkit-text-stroke: 0px #ee2e38}
  </style>
</head>
<body>
<p class="p1"><span class="s1">import</span><span class="s2"> </span><span class="s3">React</span><span class="s4">,</span><span class="s2"> </span><span class="s4">{</span><span class="s2"> useState</span><span class="s4">,</span><span class="s2"> useEffect</span><span class="s4">,</span><span class="s2"> useMemo </span><span class="s4">}</span><span class="s2"> </span><span class="s1">from</span><span class="s2"> </span><span class="s5">'react'</span><span class="s4">;</span></p>
<p class="p2"><span class="s1">import</span><span class="s6"> </span><span class="s4">{</span><span class="s6"> </span><span class="s2">Upload</span><span class="s4">,</span><span class="s6"> </span><span class="s2">AlertTriangle</span><span class="s4">,</span><span class="s6"> </span><span class="s2">CheckCircle</span><span class="s4">,</span><span class="s6"> </span><span class="s2">XCircle</span><span class="s4">,</span><span class="s6"> </span><span class="s2">ChevronDown</span><span class="s4">,</span><span class="s6"> </span><span class="s2">ChevronUp</span><span class="s4">,</span><span class="s6"> </span><span class="s2">Download</span><span class="s4">,</span><span class="s6"> </span><span class="s2">Info</span><span class="s4">,</span><span class="s6"> </span><span class="s2">Activity</span><span class="s4">,</span><span class="s6"> </span><span class="s2">DollarSign</span><span class="s4">,</span><span class="s6"> </span><span class="s2">Target</span><span class="s4">,</span><span class="s6"> </span><span class="s2">Calendar</span><span class="s4">,</span><span class="s6"> </span><span class="s2">TrendingUp</span><span class="s4">,</span><span class="s6"> </span><span class="s2">TrendingDown</span><span class="s4">,</span><span class="s6"> </span><span class="s2">FileText</span><span class="s6"> </span><span class="s4">}</span><span class="s6"> </span><span class="s1">from</span><span class="s6"> </span><span class="s5">'lucide-react'</span><span class="s4">;</span></p>
<p class="p3"><span class="s1">import</span><span class="s6"> _ </span><span class="s1">from</span><span class="s6"> </span><span class="s5">'lodash'</span><span class="s4">;</span><span class="s6"> </span><span class="s2">// 虽然是单文件，但为了处理复杂逻辑，模拟lodash的一些功能或直接用原生JS</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s2">// --- 核心工具函数 ---</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s2">// 1. 数据清洗：处理 "$1,234.56", "97.60%", "&lt;10" 等格式</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> cleanNumber </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">val</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s1">typeof</span><span class="s2"> val </span><span class="s4">===</span><span class="s2"> </span><span class="s5">'number'</span><span class="s4">)</span><span class="s2"> </span><span class="s1">return</span><span class="s2"> val</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(!</span><span class="s2">val</span><span class="s4">)</span><span class="s2"> </span><span class="s1">return</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 处理 "&lt;10" 这种情况，通常视为小数值，这里暂定为 0 或 10，视业务逻辑，这里按 10 处理保守计算</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">val</span><span class="s4">.</span><span class="s2">includes</span><span class="s4">(</span><span class="s5">'&lt;'</span><span class="s4">))</span><span class="s2"> </span><span class="s1">return</span><span class="s2"> parseFloat</span><span class="s4">(</span><span class="s2">val</span><span class="s4">.</span><span class="s2">replace</span><span class="s4">(</span><span class="s9">/[^0-9.]/</span><span class="s1">g</span><span class="s4">,</span><span class="s2"> </span><span class="s5">''</span><span class="s4">))</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 移除 $, ,, %</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> cleanStr </span><span class="s4">=</span><span class="s2"> val</span><span class="s4">.</span><span class="s2">replace</span><span class="s4">(</span><span class="s9">/[$,%"]/</span><span class="s1">g</span><span class="s4">,</span><span class="s2"> </span><span class="s5">''</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> num </span><span class="s4">=</span><span class="s2"> parseFloat</span><span class="s4">(</span><span class="s2">cleanStr</span><span class="s4">);</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 如果原字符串包含 %，则除以 100 (除了特定的 Display Share 这种本身就是百分比数值的字段，需特殊处理，这里统一转为小数方便计算，或者保持原值)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 注意：CSV里的 97.60%通常解析为 97.60 还是 0.976?<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 观察用户数据：Display Share 97.60%，逻辑判断是 &gt;50。如果是0.976则不通。</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 策略：百分数解析后保留原数值（97.6），但在清洗时若检测到%，标记一下？</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 简化策略：直接解析数字。逻辑判断时根据量级调整。</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 用户逻辑: Display Share &gt; 50 (意味着50%)。所以 97.60% 解析为 97.6 是对的。</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 用户逻辑: CTR &lt; 0.8% (即 0.008)。CSV里是 1.04%。解析为 1.04。逻辑里需要用 1.04 &lt; 0.8 判断? 不，1.04% &gt; 0.8%。</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// **关键修正**：PDF逻辑里的百分比通常指绝对值（如ROAS 2.0, Share 50%）。</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 但CTR、CVR通常很小。PDF写 "CVR &lt; 0.5%"。CSV里是 "0.08%"。解析出来是 0.08。0.08 &lt; 0.5，逻辑成立。</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> isNaN</span><span class="s4">(</span><span class="s2">num</span><span class="s4">)</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> num</span><span class="s4">;</span></p>
<p class="p5"><span class="s2">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s2">// 2. 日期解析</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> parseDate </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">dateStr</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(!</span><span class="s2">dateStr</span><span class="s4">)</span><span class="s2"> </span><span class="s1">return</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s4">(</span><span class="s8">0</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s4">(</span><span class="s2">dateStr</span><span class="s4">);</span></p>
<p class="p5"><span class="s2">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s2">// --- 核心诊断逻辑引擎 ---</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> analyzeCampaign </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">historyData</span><span class="s4">,</span><span class="s2"> config</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> issues </span><span class="s4">=</span><span class="s2"> </span><span class="s4">[];</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// historyData 是按时间倒序排列的数组（最新在 historyData[0]）</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(!</span><span class="s2">historyData </span><span class="s4">||</span><span class="s2"> historyData</span><span class="s4">.</span><span class="s2">length </span><span class="s4">===</span><span class="s2"> </span><span class="s8">0</span><span class="s4">)</span><span class="s2"> </span><span class="s1">return</span><span class="s2"> </span><span class="s4">{</span><span class="s2"> data</span><span class="s4">:</span><span class="s2"> </span><span class="s4">{},</span><span class="s2"> issues</span><span class="s4">:</span><span class="s2"> </span><span class="s4">[]</span><span class="s2"> </span><span class="s4">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> today </span><span class="s4">=</span><span class="s2"> historyData</span><span class="s4">[</span><span class="s8">0</span><span class="s4">];</span><span class="s2"> </span><span class="s10">// 最新的一天 (T)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> yesterday </span><span class="s4">=</span><span class="s2"> historyData</span><span class="s4">[</span><span class="s8">1</span><span class="s4">]</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s4">{};</span><span class="s2"> </span><span class="s10">// T-1</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> dayBefore </span><span class="s4">=</span><span class="s2"> historyData</span><span class="s4">[</span><span class="s8">2</span><span class="s4">]</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s4">{};</span><span class="s2"> </span><span class="s10">// T-2</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 提取并清洗数据字段 (Mapping CSV headers to Logic vars)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> data </span><span class="s4">=</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span>name</span><span class="s4">:</span><span class="s6"> today</span><span class="s4">[</span><span class="s2">'Campaign'</span><span class="s4">]</span><span class="s6"> </span><span class="s4">||</span><span class="s6"> </span><span class="s2">'Unknown'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>date</span><span class="s4">:</span><span class="s2"> today</span><span class="s4">[</span><span class="s5">'Day'</span><span class="s4">],</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 自动计算 Age: 如果有 Start Date 从 Name 提取，或者根据数据行数估算，或者直接假设 &gt;4 (Stable)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 提取 Name 中的日期: "US-20251210-..."</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>age</span><span class="s4">:</span><span class="s2"> </span><span class="s4">(()</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> match </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Campaign'</span><span class="s4">]</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s5">''</span><span class="s4">).</span><span class="s2">match</span><span class="s4">(</span><span class="s9">/(\d{8})/</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">match</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> startStr </span><span class="s4">=</span><span class="s2"> match</span><span class="s4">[</span><span class="s8">1</span><span class="s4">];</span><span class="s2"> </span><span class="s10">// 20251210</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> startDate </span><span class="s4">=</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s4">(</span><span class="s5">`</span><span class="s4">${</span><span class="s2">startStr</span><span class="s4">.</span><span class="s2">substring</span><span class="s4">(</span><span class="s8">0</span><span class="s4">,</span><span class="s8">4</span><span class="s4">)}</span><span class="s5">-</span><span class="s4">${</span><span class="s2">startStr</span><span class="s4">.</span><span class="s2">substring</span><span class="s4">(</span><span class="s8">4</span><span class="s4">,</span><span class="s8">6</span><span class="s4">)}</span><span class="s5">-</span><span class="s4">${</span><span class="s2">startStr</span><span class="s4">.</span><span class="s2">substring</span><span class="s4">(</span><span class="s8">6</span><span class="s4">,</span><span class="s8">8</span><span class="s4">)}</span><span class="s5">`</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> currDate </span><span class="s4">=</span><span class="s2"> parseDate</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Day'</span><span class="s4">]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> diffTime </span><span class="s4">=</span><span class="s2"> </span><span class="s3">Math</span><span class="s4">.</span><span class="s2">abs</span><span class="s4">(</span><span class="s2">currDate </span><span class="s4">-</span><span class="s2"> startDate</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">return</span><span class="s2"> </span><span class="s3">Math</span><span class="s4">.</span><span class="s2">ceil</span><span class="s4">(</span><span class="s2">diffTime </span><span class="s4">/</span><span class="s2"> </span><span class="s4">(</span><span class="s8">1000</span><span class="s2"> </span><span class="s4">*</span><span class="s2"> </span><span class="s8">60</span><span class="s2"> </span><span class="s4">*</span><span class="s2"> </span><span class="s8">60</span><span class="s2"> </span><span class="s4">*</span><span class="s2"> </span><span class="s8">24</span><span class="s4">));</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">return</span><span class="s2"> historyData</span><span class="s4">.</span><span class="s2">length</span><span class="s4">;</span><span class="s2"> </span><span class="s10">// Fallback</span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">})(),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>cost</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Cost'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>budget</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Budget'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>clicks</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Clicks'</span><span class="s4">]),</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// CSV 没有 Sessions，尝试用 Clicks 近似或忽略基建检查中的 Sessions 逻辑</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>sessions</span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">,</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>impressions</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Impr.'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>conversions</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'Purchase'</span><span class="s4">]),</span><span class="s2"> </span><span class="s10">// CSV header is Purchase</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>convValue</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'销售额'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>atc</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'ATC'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>ic</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'IC'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>cpm</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'CPM'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>cpc</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'CPC'</span><span class="s4">]),</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>ctr</span><span class="s4">:</span><span class="s6"> cleanNumber</span><span class="s4">(</span><span class="s6">today</span><span class="s4">[</span><span class="s5">'CTR'</span><span class="s4">]),</span><span class="s6"> </span><span class="s2">// e.g., 1.04 (means 1.04%)</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 历史数据</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>prevCpm</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">yesterday</span><span class="s4">[</span><span class="s5">'CPM'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>prevPrevCpm</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">dayBefore</span><span class="s4">[</span><span class="s5">'CPM'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>yesterdayConversions</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">yesterday</span><span class="s4">[</span><span class="s5">'Purchase'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>prevCtr</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">yesterday</span><span class="s4">[</span><span class="s5">'CTR'</span><span class="s4">]),</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 状态字段</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span>policyStatus</span><span class="s4">:</span><span class="s6"> today</span><span class="s4">[</span><span class="s2">'Policy Review Status'</span><span class="s4">]</span><span class="s6"> </span><span class="s4">||</span><span class="s6"> </span><span class="s2">'Eligible'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>gmcStatus</span><span class="s4">:</span><span class="s2"> today</span><span class="s4">[</span><span class="s5">'GMC Status'</span><span class="s4">]</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s5">'Active'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span>assetStatus</span><span class="s4">:</span><span class="s6"> today</span><span class="s4">[</span><span class="s2">'Asset Approval Status'</span><span class="s4">]</span><span class="s6"> </span><span class="s4">||</span><span class="s6"> </span><span class="s2">''</span><span class="s4">,</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 诊断字段</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>displayVideoCostShare</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'版位跑偏诊断（cost：display+video占比）'</span><span class="s4">]),</span><span class="s2"> </span><span class="s10">// e.g. 97.60</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>cvr</span><span class="s4">:</span><span class="s6"> cleanNumber</span><span class="s4">(</span><span class="s6">today</span><span class="s4">[</span><span class="s5">'CVR'</span><span class="s4">]),</span><span class="s6"> </span><span class="s2">// e.g. 0.08 (means 0.08%)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span>roas</span><span class="s4">:</span><span class="s6"> cleanNumber</span><span class="s4">(</span><span class="s6">today</span><span class="s4">[</span><span class="s5">'ROI'</span><span class="s4">]),</span><span class="s6"> </span><span class="s2">// CSV header says ROI, assuming it's ROAS value (e.g. 3.95)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>cpa</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'CPA'</span><span class="s4">]),</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>aov</span><span class="s4">:</span><span class="s2"> cleanNumber</span><span class="s4">(</span><span class="s2">today</span><span class="s4">[</span><span class="s5">'AOV'</span><span class="s4">]),</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 辅助展示</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>impressionShare</span><span class="s4">:</span><span class="s2"> today</span><span class="s4">[</span><span class="s5">'Impression Share'</span><span class="s4">]</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> </span><span class="s5">'-'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 辅助计算</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> cpatc </span><span class="s4">=</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">atc </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">/</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">atc </span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> cpic </span><span class="s4">=</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">ic </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">/</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">ic </span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 基准值计算</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s2"> benchmarkCpatc </span><span class="s4">=</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpatc</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s2"> benchmarkCpic </span><span class="s4">=</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpic</span><span class="s4">;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(!</span><span class="s2">benchmarkCpatc </span><span class="s4">||</span><span class="s2"> </span><span class="s4">!</span><span class="s2">benchmarkCpic</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetAov </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">1000</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>benchmarkCpatc </span><span class="s4">=</span><span class="s2"> </span><span class="s8">100</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>benchmarkCpic </span><span class="s4">=</span><span class="s2"> </span><span class="s8">100</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span><span class="s2"> </span><span class="s1">else</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>benchmarkCpatc </span><span class="s4">=</span><span class="s2"> </span><span class="s8">70</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>benchmarkCpic </span><span class="s4">=</span><span class="s2"> </span><span class="s8">70</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 模块一：账户基础与追踪健康度 ---</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 1.1 转化追踪 (由于缺少 Sessions 字段，此逻辑降级或仅在有 Sessions 时触发)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 如果 CSV 中没有 Sessions，我们可以基于 Conversions 和 ATC 的逻辑一致性来判断</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">sessions </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">clicks </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">100</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">sessions </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">10</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'CRITICAL'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'基建诊断'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'转化追踪严重异常'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`Clicks(</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">clicks</span><span class="s4">}</span><span class="s5">) &gt;&gt; Sessions(</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">sessions</span><span class="s4">}</span><span class="s5">)`</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span>diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'落地页404 / 重定向丢失UTM / CMP拦截。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'检查 Final URL 及 UTM 参数。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 1.2 审核状态</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">policyStatus </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">policyStatus</span><span class="s4">.</span><span class="s2">toLowerCase</span><span class="s4">().</span><span class="s2">includes</span><span class="s4">(</span><span class="s5">'limit'</span><span class="s4">)</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">policyStatus</span><span class="s4">.</span><span class="s2">toLowerCase</span><span class="s4">().</span><span class="s2">includes</span><span class="s4">(</span><span class="s5">'disapproved'</span><span class="s4">)))</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'基建诊断'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'素材/商品拒登风险'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`Policy Status: </span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">policyStatus</span><span class="s4">}</span><span class="s5">`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'存在违规或受限内容。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'根据拒绝原因申诉或修改素材。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// GMC 状态</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">gmcStatus </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">gmcStatus</span><span class="s4">.</span><span class="s2">toLowerCase</span><span class="s4">()</span><span class="s2"> </span><span class="s4">!==</span><span class="s2"> </span><span class="s5">'active'</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">gmcStatus</span><span class="s4">.</span><span class="s2">toLowerCase</span><span class="s4">()</span><span class="s2"> </span><span class="s4">!==</span><span class="s2"> </span><span class="s5">'linked'</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">     </span></span><span class="s2">// 注意：样本数据中 GMC Status 为 Linked 或 Active</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">     </span></span><span class="s2">// 如果出现 Disapproved</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">     </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">gmcStatus</span><span class="s4">.</span><span class="s2">toLowerCase</span><span class="s4">().</span><span class="s2">includes</span><span class="s4">(</span><span class="s5">'disapproved'</span><span class="s4">))</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'CRITICAL'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'基建诊断'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'GMC 账户异常'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`GMC Status: </span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">gmcStatus</span><span class="s4">}</span><span class="s5">`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'供血不足，商品被拒。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'修复 Merchant Center Feed。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">     </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 模块二：广告诊断 ---</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> isLearning </span><span class="s4">=</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">age </span><span class="s4">&lt;=</span><span class="s2"> </span><span class="s8">3</span><span class="s4">;</span><span class="s2"> </span><span class="s10">// 基于计算出的 Age</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">isLearning</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// === 学习期 (0-3天) ===</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 场景 A: 消耗过热</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">&gt;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">budget </span><span class="s4">*</span><span class="s2"> </span><span class="s8">1.2</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">roas </span><span class="s4">&gt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetRoas </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">cpa </span><span class="s4">&lt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpa</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span><span class="s2"> level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'GOOD'</span><span class="s4">,</span><span class="s2"> </span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'学习期-预算'</span><span class="s4">,</span><span class="s2"> title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'消耗过热 - 良性'</span><span class="s4">,</span><span class="s2"> desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'超预算但效果佳。'</span><span class="s4">,</span><span class="s2"> diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'激进探索中。'</span><span class="s4">,</span><span class="s2"> action</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'不干预或加预算。'</span><span class="s2"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span><span class="s2"> </span><span class="s1">else</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span><span class="s2"> level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'MEDIUM'</span><span class="s4">,</span><span class="s2"> </span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'学习期-预算'</span><span class="s4">,</span><span class="s2"> title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'消耗过热 - 需观察'</span><span class="s4">,</span><span class="s2"> desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'超预算 &gt;20%。'</span><span class="s4">,</span><span class="s2"> diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'正常波动。'</span><span class="s4">,</span><span class="s2"> action</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'观察至第4天。'</span><span class="s2"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 场景 B: 消耗不足</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">&lt;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">budget </span><span class="s4">*</span><span class="s2"> </span><span class="s8">0.8</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpa </span><span class="s4">&lt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpa</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>issues</span><span class="s4">.</span><span class="s6">push</span><span class="s4">({</span><span class="s6"> level</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'MEDIUM'</span><span class="s4">,</span><span class="s6"> </span><span class="s1">module</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'学习期-预算'</span><span class="s4">,</span><span class="s6"> title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'消耗不足 - 保守'</span><span class="s4">,</span><span class="s6"> desc</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'花不出钱且CPA低。'</span><span class="s4">,</span><span class="s6"> diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'出价过于保守。'</span><span class="s4">,</span><span class="s6"> action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'提预算或放宽ROAS/CPA限制。'</span><span class="s6"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span><span class="s2"> </span><span class="s1">else</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>issues</span><span class="s4">.</span><span class="s6">push</span><span class="s4">({</span><span class="s6"> level</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'MEDIUM'</span><span class="s4">,</span><span class="s6"> </span><span class="s1">module</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'学习期-预算'</span><span class="s4">,</span><span class="s6"> title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'消耗不足 - 竞争力差'</span><span class="s4">,</span><span class="s6"> desc</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'花不出钱且效果差。'</span><span class="s4">,</span><span class="s6"> diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'竞争力不足。'</span><span class="s4">,</span><span class="s6"> action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'降低tROAS目标 (如4.0-&gt;3.5)。'</span><span class="s6"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 浅层交互</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">clicks </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">100</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">atc </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">2</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span>issues</span><span class="s4">.</span><span class="s6">push</span><span class="s4">({</span><span class="s6"> level</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'HIGH'</span><span class="s4">,</span><span class="s6"> </span><span class="s1">module</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'学习期-交互'</span><span class="s4">,</span><span class="s6"> title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'有点击无加购'</span><span class="s4">,</span><span class="s6"> desc</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'Click&gt;100, ATC&lt;2'</span><span class="s4">,</span><span class="s6"> diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'素材误导 / 落地页体验差 / 价格无竞争力。'</span><span class="s4">,</span><span class="s6"> action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'查GMC价格竞争力，优化落地页CTA。'</span><span class="s6"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 版位跑偏 (学习期重点)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">50</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'学习期-版位'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'版位跑偏 (Display/Video &gt; 50%)'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`Display+Video 消耗占比 </span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare</span><span class="s4">}</span><span class="s5">%`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'偷懒式学习，跑向低效版位。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'1. 排除App类目; 2. 加竞品词Search Themes; 3. 上传原生视频。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span><span class="s2"> </span><span class="s1">else</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// === 稳定期 (4天+) ===</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 场景: 消耗异常</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">&gt;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">budget </span><span class="s4">*</span><span class="s2"> </span><span class="s8">1.2</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cvr </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">0.5</span><span class="s2"> </span><span class="s4">||</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">cpa </span><span class="s4">&gt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpa </span><span class="s4">*</span><span class="s2"> </span><span class="s8">1.2</span><span class="s4">))</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">         </span>issues</span><span class="s4">.</span><span class="s6">push</span><span class="s4">({</span><span class="s6"> level</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'HIGH'</span><span class="s4">,</span><span class="s6"> </span><span class="s1">module</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'稳定期-预算'</span><span class="s4">,</span><span class="s6"> title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'恶性暴冲'</span><span class="s4">,</span><span class="s6"> desc</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'消耗激增但效果差。'</span><span class="s4">,</span><span class="s6"> diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'流量质量下降。'</span><span class="s4">,</span><span class="s6"> action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'回调预算，清洗Search Terms。'</span><span class="s6"> </span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// CVR 异常波动 - 情况A: 虚假繁荣 (Cheap &amp; Useless)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 逻辑: CPM 环比下降20%</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> cpmDrop </span><span class="s4">=</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">prevCpm </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpm </span><span class="s4">-</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">prevCpm</span><span class="s4">)</span><span class="s2"> </span><span class="s4">/</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">prevCpm </span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cvr </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">0.5</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> cpmDrop </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s4">-</span><span class="s8">0.2</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> cpatc </span><span class="s4">&gt;</span><span class="s2"> benchmarkCpatc</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'稳定期-CVR'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'虚假繁荣 (Cheap &amp; Useless)'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`CPM环比跌</span><span class="s4">${(</span><span class="s2">cpmDrop</span><span class="s4">*</span><span class="s8">100</span><span class="s4">).</span><span class="s2">toFixed</span><span class="s4">(</span><span class="s8">1</span><span class="s4">)}</span><span class="s5">%，加购成本高。`</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'垃圾流量涌入(Display/App)。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'1. 版位清洗(排除App); 2. 检查Final URL Expansion。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// CVR 异常波动 - 情况C: 全面崩盘</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 逻辑: CVR &lt; 0.5% (PDF阈值), CSV数据如 0.08 (即0.08%)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// CTR &lt; 0.5% (PDF阈值), CSV数据如 1.04 (即1.04%) -&gt; 正常</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 若 CTR &lt; 0.5 且 CVR &lt; 0.5</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cvr </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">0.5</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">ctr </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">0.5</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> cpatc </span><span class="s4">&gt;</span><span class="s2"> benchmarkCpatc</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'CRITICAL'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'稳定期-CVR'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'全面崩盘 (No Click, No Buy)'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`CTR(</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">ctr</span><span class="s4">}</span><span class="s5">%)低, CVR(</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cvr</span><span class="s4">}</span><span class="s5">%)低。`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'素材与受众严重错配。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'1. 替换最差素材; 2. 暂停宽泛Interests，改用Search Themes。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// --- 模块三：ROI深度诊断 (通用) ---</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 零转化 (Dead Campaign) - 累计消耗逻辑简化为当日高消耗零转化</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">2</span><span class="s2"> </span><span class="s4">*</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpa </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">conversions </span><span class="s4">===</span><span class="s2"> </span><span class="s8">0</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'CRITICAL'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'ROI诊断'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'零转化风险 (Zero Conversion)'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`消耗 </span><span class="s11">$</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost</span><span class="s4">}</span><span class="s5"> (&gt;</span><span class="s4">${</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetCpa</span><span class="s4">*</span><span class="s8">2</span><span class="s4">}</span><span class="s5">) 且 0 转化。`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'交易阻力或价格硬伤。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'漏斗倒推：有IC查价格，无IC查落地页。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 配件陷阱 (AOV &lt; Target/2)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">conversions </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">2</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">aov </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s4">(</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetAov </span><span class="s4">/</span><span class="s2"> </span><span class="s8">2</span><span class="s4">))</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'ROI诊断'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>title</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'配件陷阱 (Low AOV)'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`AOV </span><span class="s11">$</span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">aov</span><span class="s4">}</span><span class="s5"> 远低于目标 </span><span class="s11">$</span><span class="s4">${</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetAov</span><span class="s4">}</span><span class="s5">。`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'机器在推低价配件凑单量。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'1. 强制改策略为"Max Conv. Value"; 2. 排除低价SKU。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">   </span></span><span class="s2">// ROI 不达标</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">   </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">roas </span><span class="s4">&lt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetRoas </span><span class="s4">&amp;&amp;</span><span class="s2"> data</span><span class="s4">.</span><span class="s2">cost </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">50</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span><span class="s2"> </span><span class="s10">// 增加一个最小消耗门槛防止误报</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'ROI诊断'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span>title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'ROI 不达标'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`ROAS </span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">roas</span><span class="s4">}</span><span class="s5"> &lt; Target </span><span class="s4">${</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetRoas</span><span class="s4">}</span><span class="s5">`</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span>diagnosis</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'账户混入低效SKU或素材。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">         </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'排除低效SKU(Cost高ROAS低)，否定无关搜索词。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">   </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">   </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">   </span></span><span class="s2">// 版位跑偏 (稳定期也要查)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">   </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">60</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">       </span>issues</span><span class="s4">.</span><span class="s2">push</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>level</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">module</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'版位诊断'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>title</span><span class="s4">:</span><span class="s2"> </span><span class="s5">'版位跑偏风险'</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>desc</span><span class="s4">:</span><span class="s2"> </span><span class="s5">`Display/Video 占比 </span><span class="s4">${</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare</span><span class="s4">}</span><span class="s5">%`</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>diagnosis</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'视频/展示版位消耗过高，通常转化较差。'</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span>action</span><span class="s4">:</span><span class="s6"> </span><span class="s2">'上传更"硬"的产品视频，或排除低效素材。'</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">   </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> </span><span class="s4">{</span><span class="s2"> data</span><span class="s4">,</span><span class="s2"> issues </span><span class="s4">};</span></p>
<p class="p5"><span class="s2">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s2">// --- UI 组件 ---</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">Card</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> </span><span class="s4">({</span><span class="s2"> title</span><span class="s4">,</span><span class="s2"> children</span><span class="s4">,</span><span class="s2"> className </span><span class="s4">=</span><span class="s2"> </span><span class="s5">""</span><span class="s2"> </span><span class="s4">})</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">={</span><span class="s2">`bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden </span><span class="s4">${</span><span class="s6">className</span><span class="s4">}</span><span class="s2">`</span><span class="s4">}&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">{</span><span class="s6">title </span><span class="s4">&amp;&amp;</span><span class="s6"> </span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"px-6 py-4 border-b border-slate-100 font-semibold text-slate-800"</span><span class="s4">&gt;{</span><span class="s6">title</span><span class="s4">}&lt;/</span><span class="s6">div</span><span class="s4">&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"p-6"</span><span class="s4">&gt;{</span><span class="s2">children</span><span class="s4">}&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p5"><span class="s2">);</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">Badge</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> </span><span class="s4">({</span><span class="s2"> level </span><span class="s4">})</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> styles </span><span class="s4">=</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s3">CRITICAL</span><span class="s4">:</span><span class="s6"> </span><span class="s2">"bg-red-100 text-red-700 border-red-200"</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s3">HIGH</span><span class="s4">:</span><span class="s6"> </span><span class="s2">"bg-orange-100 text-orange-700 border-orange-200"</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s3">MEDIUM</span><span class="s4">:</span><span class="s6"> </span><span class="s2">"bg-yellow-100 text-yellow-700 border-yellow-200"</span><span class="s4">,</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s3">GOOD</span><span class="s4">:</span><span class="s6"> </span><span class="s2">"bg-green-100 text-green-700 border-green-200"</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">};</span></p>
<p class="p7"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s6"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">={</span><span class="s2">`px-2 py-1 rounded text-xs font-bold border </span><span class="s4">${</span><span class="s6">styles</span><span class="s4">[</span><span class="s6">level</span><span class="s4">]</span><span class="s6"> </span><span class="s4">||</span><span class="s6"> </span><span class="s2">"bg-gray-100 text-gray-600"</span><span class="s4">}</span><span class="s2">`</span><span class="s4">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">{</span><span class="s2">level</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">);</span></p>
<p class="p5"><span class="s2">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">MetricTrend</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> </span><span class="s4">({</span><span class="s2"> current</span><span class="s4">,</span><span class="s2"> prev</span><span class="s4">,</span><span class="s2"> label</span><span class="s4">,</span><span class="s2"> format </span><span class="s4">=</span><span class="s2"> </span><span class="s5">'number'</span><span class="s2"> </span><span class="s4">})</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p7"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">if</span><span class="s6"> </span><span class="s4">(</span><span class="s6">prev </span><span class="s4">===</span><span class="s6"> </span><span class="s8">0</span><span class="s6"> </span><span class="s4">||</span><span class="s6"> prev </span><span class="s4">===</span><span class="s6"> </span><span class="s2">undefined</span><span class="s4">)</span><span class="s6"> </span><span class="s2">return</span><span class="s6"> </span><span class="s2">null</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> diff </span><span class="s4">=</span><span class="s2"> current </span><span class="s4">-</span><span class="s2"> prev</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> percent </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">diff </span><span class="s4">/</span><span class="s2"> prev</span><span class="s4">)</span><span class="s2"> </span><span class="s4">*</span><span class="s2"> </span><span class="s8">100</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> isUp </span><span class="s4">=</span><span class="s2"> diff </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">0</span><span class="s4">;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s6"> color </span><span class="s4">=</span><span class="s6"> isUp </span><span class="s4">?</span><span class="s6"> </span><span class="s2">'text-red-500'</span><span class="s6"> </span><span class="s4">:</span><span class="s6"> </span><span class="s2">'text-green-500'</span><span class="s4">;</span><span class="s6"> </span><span class="s10">// 默认涨是红(如CPA涨是不好的)，需根据指标类型调整</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 对于 ROAS, CVR, CTR，涨是好的 (Green)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> isGoodMetric </span><span class="s4">=</span><span class="s2"> </span><span class="s4">[</span><span class="s5">'ROAS'</span><span class="s4">,</span><span class="s2"> </span><span class="s5">'CVR'</span><span class="s4">,</span><span class="s2"> </span><span class="s5">'CTR'</span><span class="s4">,</span><span class="s2"> </span><span class="s5">'Conversions'</span><span class="s4">].</span><span class="s2">some</span><span class="s4">(</span><span class="s2">k </span><span class="s4">=&gt;</span><span class="s2"> label</span><span class="s4">.</span><span class="s2">includes</span><span class="s4">(</span><span class="s2">k</span><span class="s4">));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> trendColor </span><span class="s4">=</span><span class="s2"> isGoodMetric<span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">?</span><span class="s6"> </span><span class="s4">(</span><span class="s6">isUp </span><span class="s4">?</span><span class="s6"> </span><span class="s2">'text-green-600'</span><span class="s6"> </span><span class="s4">:</span><span class="s6"> </span><span class="s2">'text-red-600'</span><span class="s4">)</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">:</span><span class="s6"> </span><span class="s4">(</span><span class="s6">isUp </span><span class="s4">?</span><span class="s6"> </span><span class="s2">'text-red-600'</span><span class="s6"> </span><span class="s4">:</span><span class="s6"> </span><span class="s2">'text-green-600'</span><span class="s4">);</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p7"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s6"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"flex items-center text-xs gap-1 mt-1"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-slate-400"</span><span class="s4">&gt;</span><span class="s2">vs yst:&lt;/span</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">={</span><span class="s2">`flex items-center font-medium </span><span class="s4">${</span><span class="s6">trendColor</span><span class="s4">}</span><span class="s2">`</span><span class="s4">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">{</span><span class="s2">isUp </span><span class="s4">?</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">TrendingUp</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">10</span><span class="s4">}</span><span class="s2"> /&gt; </span><span class="s4">:</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">TrendingDown</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">10</span><span class="s4">}</span><span class="s2"> /&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">{</span><span class="s3">Math</span><span class="s4">.</span><span class="s2">abs</span><span class="s4">(</span><span class="s2">percent</span><span class="s4">).</span><span class="s2">toFixed</span><span class="s4">(</span><span class="s8">1</span><span class="s4">)}%</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">);</span></p>
<p class="p5"><span class="s2">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p7"><span class="s2">export</span><span class="s6"> </span><span class="s2">default</span><span class="s6"> </span><span class="s2">function</span><span class="s6"> </span><span class="s3">PmaxAnalyzer</span><span class="s4">()</span><span class="s6"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s4">[</span><span class="s2">activeTab</span><span class="s4">,</span><span class="s2"> setActiveTab</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> useState</span><span class="s4">(</span><span class="s5">'config'</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s4">[</span><span class="s2">config</span><span class="s4">,</span><span class="s2"> setConfig</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> useState</span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>targetRoas</span><span class="s4">:</span><span class="s2"> </span><span class="s8">4.0</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>targetCpa</span><span class="s4">:</span><span class="s2"> </span><span class="s8">50</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>targetAov</span><span class="s4">:</span><span class="s2"> </span><span class="s8">150</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>targetCpatc</span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">,</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>targetCpic</span><span class="s4">:</span><span class="s2"> </span><span class="s8">0</span><span class="s4">,</span></p>
<p class="p5"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">});</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s4">[</span><span class="s2">csvContent</span><span class="s4">,</span><span class="s2"> setCsvContent</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> useState</span><span class="s4">(</span><span class="s5">''</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s4">[</span><span class="s2">results</span><span class="s4">,</span><span class="s2"> setResults</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> useState</span><span class="s4">([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> </span><span class="s4">[</span><span class="s2">campaignGroups</span><span class="s4">,</span><span class="s2"> setCampaignGroups</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> useState</span><span class="s4">({});</span><span class="s2"> </span><span class="s10">// 存储原始分组数据</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">// 自动计算 benchmarks</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect</span><span class="s4">(()</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">let</span><span class="s2"> autoCpatc </span><span class="s4">=</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetAov </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">1000</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s8">100</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s8">70</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">let</span><span class="s2"> autoCpic </span><span class="s4">=</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetAov </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">1000</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s8">100</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s8">70</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setConfig</span><span class="s4">(</span><span class="s2">prev </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">({</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">...</span><span class="s2">prev</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>targetCpatc</span><span class="s4">:</span><span class="s2"> autoCpatc</span><span class="s4">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>targetCpic</span><span class="s4">:</span><span class="s2"> autoCpic</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">},</span><span class="s2"> </span><span class="s4">[</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetAov</span><span class="s4">]);</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleFileUpload </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">event</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> file </span><span class="s4">=</span><span class="s2"> event</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">files</span><span class="s4">[</span><span class="s8">0</span><span class="s4">];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">file</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> reader </span><span class="s4">=</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">FileReader</span><span class="s4">();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>reader</span><span class="s4">.</span><span class="s2">onload </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">e</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setCsvContent</span><span class="s4">(</span><span class="s2">e</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">result</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>processData</span><span class="s4">(</span><span class="s2">e</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">result</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>reader</span><span class="s4">.</span><span class="s2">readAsText</span><span class="s4">(</span><span class="s2">file</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> processData </span><span class="s4">=</span><span class="s2"> </span><span class="s4">(</span><span class="s2">csvText</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> lines </span><span class="s4">=</span><span class="s2"> csvText</span><span class="s4">.</span><span class="s2">trim</span><span class="s4">().</span><span class="s2">split</span><span class="s4">(</span><span class="s5">'\n'</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">lines</span><span class="s4">.</span><span class="s2">length </span><span class="s4">&lt;</span><span class="s2"> </span><span class="s8">2</span><span class="s4">)</span><span class="s2"> </span><span class="s1">return</span><span class="s4">;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 1. Parse Headers (兼容中英文)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> headers </span><span class="s4">=</span><span class="s2"> lines</span><span class="s4">[</span><span class="s8">0</span><span class="s4">].</span><span class="s2">split</span><span class="s4">(</span><span class="s5">','</span><span class="s4">).</span><span class="s2">map</span><span class="s4">(</span><span class="s2">h </span><span class="s4">=&gt;</span><span class="s2"> h</span><span class="s4">.</span><span class="s2">trim</span><span class="s4">());</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 2. Parse Rows to Objects</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> rawData </span><span class="s4">=</span><span class="s2"> </span><span class="s4">[];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">for</span><span class="s2"> </span><span class="s4">(</span><span class="s1">let</span><span class="s2"> i </span><span class="s4">=</span><span class="s2"> </span><span class="s8">1</span><span class="s4">;</span><span class="s2"> i </span><span class="s4">&lt;</span><span class="s2"> lines</span><span class="s4">.</span><span class="s2">length</span><span class="s4">;</span><span class="s2"> i</span><span class="s4">++)</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// 处理CSV中的逗号问题（如 "$3,099.00" 包含逗号）</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// 简单正则：匹配引号内的逗号不分割 (简化版，假设引号成对)</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// 这里的简单 split 可能不够，但用户提供的 CSV 看起来比较标准</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// 为了更稳健，使用 regex matching</span></p>
<p class="p8"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s6"> regex </span><span class="s4">=</span><span class="s6"> </span><span class="s2">/(".*?"|[^",\s]+)(?=\s*,|\s*$)/</span><span class="s1">g</span><span class="s4">;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// 备用简单 split，如果 regex 太复杂</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> values </span><span class="s4">=</span><span class="s2"> lines</span><span class="s4">[</span><span class="s2">i</span><span class="s4">].</span><span class="s2">split</span><span class="s4">(</span><span class="s5">','</span><span class="s4">).</span><span class="s2">map</span><span class="s4">(</span><span class="s2">v </span><span class="s4">=&gt;</span><span class="s2"> v</span><span class="s4">.</span><span class="s2">trim</span><span class="s4">());</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// Smart Mapping: 即使列顺序变了，也能通过 Header 名字找到</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> </span><span class="s4">(</span><span class="s2">values</span><span class="s4">.</span><span class="s2">length </span><span class="s4">&gt;=</span><span class="s2"> headers</span><span class="s4">.</span><span class="s2">length </span><span class="s4">-</span><span class="s2"> </span><span class="s8">1</span><span class="s4">)</span><span class="s2"> </span><span class="s4">{</span><span class="s2"> </span><span class="s10">// 允许容错</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> row </span><span class="s4">=</span><span class="s2"> </span><span class="s4">{};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>headers</span><span class="s4">.</span><span class="s2">forEach</span><span class="s4">((</span><span class="s2">h</span><span class="s4">,</span><span class="s2"> idx</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">           </span></span><span class="s2">// 移除 key 中的特殊字符，统一 key</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">           </span>row</span><span class="s4">[</span><span class="s2">h</span><span class="s4">]</span><span class="s2"> </span><span class="s4">=</span><span class="s2"> values</span><span class="s4">[</span><span class="s2">idx</span><span class="s4">];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>rawData</span><span class="s4">.</span><span class="s2">push</span><span class="s4">(</span><span class="s2">row</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">}</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 3. Group by Campaign Name</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> groups </span><span class="s4">=</span><span class="s2"> _</span><span class="s4">.</span><span class="s2">groupBy</span><span class="s4">(</span><span class="s2">rawData</span><span class="s4">,</span><span class="s2"> </span><span class="s4">(</span><span class="s2">r</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> r</span><span class="s4">[</span><span class="s5">'Campaign'</span><span class="s4">]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setCampaignGroups</span><span class="s4">(</span><span class="s2">groups</span><span class="s4">);</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 4. Analyze each group</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> analyzed </span><span class="s4">=</span><span class="s2"> </span><span class="s3">Object</span><span class="s4">.</span><span class="s2">keys</span><span class="s4">(</span><span class="s2">groups</span><span class="s4">).</span><span class="s2">map</span><span class="s4">(</span><span class="s2">campaignName </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// Sort by Date Descending (Latest first)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> sortedRows </span><span class="s4">=</span><span class="s2"> groups</span><span class="s4">[</span><span class="s2">campaignName</span><span class="s4">].</span><span class="s2">sort</span><span class="s4">((</span><span class="s2">a</span><span class="s4">,</span><span class="s2"> b</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span></span><span class="s1">return</span><span class="s2"> parseDate</span><span class="s4">(</span><span class="s2">b</span><span class="s4">[</span><span class="s5">'Day'</span><span class="s4">])</span><span class="s2"> </span><span class="s4">-</span><span class="s2"> parseDate</span><span class="s4">(</span><span class="s2">a</span><span class="s4">[</span><span class="s5">'Day'</span><span class="s4">]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">});</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s2">// Analyze the latest status using history</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">return</span><span class="s2"> analyzeCampaign</span><span class="s4">(</span><span class="s2">sortedRows</span><span class="s4">,</span><span class="s2"> config</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">});</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setResults</span><span class="s4">(</span><span class="s2">analyzed</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setActiveTab</span><span class="s4">(</span><span class="s5">'report'</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> loadDemoData </span><span class="s4">=</span><span class="s2"> </span><span class="s4">()</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">{</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s2">// 这里的 Demo Data 模拟用户上传的格式</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s6"> csv </span><span class="s4">=</span><span class="s6"> </span><span class="s2">`Campaign,Day,Budget,Cost,Impr.,Clicks,CPM,CTR,CPC,ATC,CPATC,IC,CPIC,Purchase,CPA,销售额,ROI,CVR,AOV,Impression Share,Conversion Actions,Conversion volume,GMC Status,Policy Review Status,Asset Approval Status,Product Disapproval Rate,版位跑偏诊断（cost：display+video占比）,Video版位花费占比</span></p>
<p class="p6"><span class="s2">US-Solar-Demo,2026/1/8,144,"</span><span class="s11">$</span><span class="s2">142.09 ","9,728",94,</span><span class="s11">$</span><span class="s2">14.61 ,0.97%,</span><span class="s11">$</span><span class="s2">1.51 ,3,</span><span class="s11">$</span><span class="s2">55.36 ,0,</span><span class="s11">$</span><span class="s2">0.00 ,0,</span><span class="s11">$</span><span class="s2">0.00 ,</span><span class="s11">$</span><span class="s2">0.00 ,0,0%,</span><span class="s11">$</span><span class="s2">0.00 ,&lt;10,Active,337.67,Linked,Eligible,Approved,0%,97.60%,0.44%</span></p>
<p class="p6"><span class="s2">US-Solar-Demo,2026/1/7,144,"</span><span class="s11">$</span><span class="s2">176.04 ","10,977",97,</span><span class="s11">$</span><span class="s2">16.04 ,0.88%,</span><span class="s11">$</span><span class="s2">1.81 ,2,</span><span class="s11">$</span><span class="s2">88.02 ,0,</span><span class="s11">$</span><span class="s2">0.00 ,1,</span><span class="s11">$</span><span class="s2">176.04 ,</span><span class="s11">$</span><span class="s2">799.00 ,4.54,0.53%,</span><span class="s11">$</span><span class="s2">799.00 ,&lt;10,Active,337.67,Linked,Eligible,Approved,0%,97.60%,0.44%</span></p>
<p class="p6"><span class="s2">US-Solar-Demo,2026/1/6,144,"</span><span class="s11">$</span><span class="s2">178.60 ","7,734",105,</span><span class="s11">$</span><span class="s2">23.09 ,1.36%,</span><span class="s11">$</span><span class="s2">1.70 ,0,</span><span class="s11">$</span><span class="s2">0.00 ,1,</span><span class="s11">$</span><span class="s2">178.60 ,0,</span><span class="s11">$</span><span class="s2">0.00 ,</span><span class="s11">$</span><span class="s2">0.00 ,0,0%,</span><span class="s11">$</span><span class="s2">0.00 ,&lt;10,Active,274.83,Linked,Eligible,Approved,0%,96.00%,1.57%</span></p>
<p class="p6"><span class="s2">US-Accessories-Trap,2026/1/8,200,"</span><span class="s11">$</span><span class="s2">180.00 ","20,000",200,</span><span class="s11">$</span><span class="s2">9.00 ,1.00%,</span><span class="s11">$</span><span class="s2">0.90 ,10,</span><span class="s11">$</span><span class="s2">18.00 ,5,</span><span class="s11">$</span><span class="s2">36.00 ,5,</span><span class="s11">$</span><span class="s2">36.00 ,</span><span class="s11">$</span><span class="s2">200.00 ,1.11,2.5%,</span><span class="s11">$</span><span class="s2">40.00 ,20,Active,500,Linked,Eligible,Approved,0%,10.00%,5.00%</span></p>
<p class="p6"><span class="s2">`</span><span class="s4">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setCsvContent</span><span class="s4">(</span><span class="s2">csv</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>processData</span><span class="s4">(</span><span class="s2">csv</span><span class="s4">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">};</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p7"><span class="s6"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s6"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"min-h-screen bg-slate-50 font-sans text-slate-800"</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s4">{</span><span class="s2">/* Header */</span><span class="s4">}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;</span><span class="s6">header className</span><span class="s4">=</span><span class="s2">"bg-indigo-700 text-white p-6 shadow-lg"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"max-w-7xl mx-auto flex items-center justify-between"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;</span><span class="s6">h1 className</span><span class="s4">=</span><span class="s2">"text-2xl font-bold flex items-center gap-2"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s3">Activity</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">28</span><span class="s4">}</span><span class="s2"> /&gt; </span><span class="s3">Pmax</span><span class="s2"> </span><span class="s11">智能诊断专家</span><span class="s2"> </span><span class="s3">Pro</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;/</span><span class="s2">h1</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;</span><span class="s6">p className</span><span class="s4">=</span><span class="s2">"text-indigo-100 mt-1 text-sm opacity-90"</span><span class="s4">&gt;</span><span class="s11">支持</span><span class="s6"> </span><span class="s3">Pmax</span><span class="s11">数据</span><span class="s8">11</span><span class="s4">.</span><span class="s6">csv </span><span class="s11">模板</span><span class="s6"> </span><span class="s11">•</span><span class="s6"> </span><span class="s11">时序趋势分析</span><span class="s6"> </span><span class="s11">•</span><span class="s6"> </span><span class="s11">深度归因</span><span class="s4">&lt;/</span><span class="s6">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"text-right"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">             </span></span><span class="s4">&lt;</span><span class="s6">button onClick</span><span class="s4">={</span><span class="s6">loadDemoData</span><span class="s4">}</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"text-xs bg-indigo-600 hover:bg-indigo-500 px-3 py-1 rounded text-white transition flex items-center gap-1"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span></span><span class="s4">&lt;</span><span class="s3">FileText</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">12</span><span class="s4">}</span><span class="s2">/&gt; </span><span class="s11">加载演示数据</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span></span><span class="s4">&lt;/</span><span class="s2">button</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;/</span><span class="s2">header</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;</span><span class="s6">main className</span><span class="s4">=</span><span class="s2">"max-w-7xl mx-auto p-6 grid grid-cols-1 lg:grid-cols-12 gap-6"</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">        </span></span><span class="s4">{</span><span class="s2">/* Left Sidebar: Controls */</span><span class="s4">}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"lg:col-span-3 space-y-6"</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">          </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">          </span></span><span class="s4">{</span><span class="s2">/* Step 1: Config */</span><span class="s4">}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;</span><span class="s3">Card</span><span class="s6"> title</span><span class="s4">=</span><span class="s2">"1. 设定业务目标 (Benchmark)"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"space-y-4"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s6">label className</span><span class="s4">=</span><span class="s2">"block text-xs font-medium text-slate-500 mb-1"</span><span class="s4">&gt;</span><span class="s3">Target</span><span class="s6"> </span><span class="s3">ROAS</span><span class="s4">&lt;/</span><span class="s6">label</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"relative"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s2">input<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">type</span><span class="s4">=</span><span class="s5">"number"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>value</span><span class="s4">={</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetRoas</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>onChange</span><span class="s4">={(</span><span class="s2">e</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> setConfig</span><span class="s4">({...</span><span class="s2">config</span><span class="s4">,</span><span class="s2"> targetRoas</span><span class="s4">:</span><span class="s2"> parseFloat</span><span class="s4">(</span><span class="s2">e</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">value</span><span class="s4">)})}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                    </span>className</span><span class="s4">=</span><span class="s2">"w-full pl-8 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none"</span><span class="s6"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>/&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s3">Target</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"absolute left-2.5 top-2.5 text-slate-400 w-4 h-4"</span><span class="s6"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s6">label className</span><span class="s4">=</span><span class="s2">"block text-xs font-medium text-slate-500 mb-1"</span><span class="s4">&gt;</span><span class="s3">Target</span><span class="s6"> </span><span class="s3">CPA</span><span class="s6"> </span><span class="s4">(</span><span class="s6">$</span><span class="s4">)&lt;/</span><span class="s6">label</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"relative"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s2">input<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">type</span><span class="s4">=</span><span class="s5">"number"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>value</span><span class="s4">={</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetCpa</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>onChange</span><span class="s4">={(</span><span class="s2">e</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> setConfig</span><span class="s4">({...</span><span class="s2">config</span><span class="s4">,</span><span class="s2"> targetCpa</span><span class="s4">:</span><span class="s2"> parseFloat</span><span class="s4">(</span><span class="s2">e</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">value</span><span class="s4">)})}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                    </span>className</span><span class="s4">=</span><span class="s2">"w-full pl-8 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none"</span><span class="s6"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>/&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s3">DollarSign</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"absolute left-2.5 top-2.5 text-slate-400 w-4 h-4"</span><span class="s6"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s6">label className</span><span class="s4">=</span><span class="s2">"block text-xs font-medium text-slate-500 mb-1"</span><span class="s4">&gt;</span><span class="s3">Target</span><span class="s6"> </span><span class="s3">AOV</span><span class="s6"> </span><span class="s4">(</span><span class="s6">$</span><span class="s4">)&lt;/</span><span class="s6">label</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"relative"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s2">input<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">type</span><span class="s4">=</span><span class="s5">"number"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>value</span><span class="s4">={</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetAov</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>onChange</span><span class="s4">={(</span><span class="s2">e</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> setConfig</span><span class="s4">({...</span><span class="s2">config</span><span class="s4">,</span><span class="s2"> targetAov</span><span class="s4">:</span><span class="s2"> parseFloat</span><span class="s4">(</span><span class="s2">e</span><span class="s4">.</span><span class="s2">target</span><span class="s4">.</span><span class="s2">value</span><span class="s4">)})}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                    </span>className</span><span class="s4">=</span><span class="s2">"w-full pl-8 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 outline-none"</span><span class="s6"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>/&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s3">DollarSign</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"absolute left-2.5 top-2.5 text-slate-400 w-4 h-4"</span><span class="s6"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">              </span></span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"pt-2 border-t border-slate-100 bg-slate-50 p-2 rounded text-xs text-slate-500 space-y-1"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex justify-between"</span><span class="s2">&gt;&lt;span</span><span class="s4">&gt;</span><span class="s3">Auto</span><span class="s2"> </span><span class="s3">CPATC</span><span class="s2">:&lt;/span&gt;&lt;span className</span><span class="s4">=</span><span class="s5">"font-mono text-indigo-600"</span><span class="s4">&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetCpatc</span><span class="s4">}&lt;/</span><span class="s2">span&gt;&lt;/div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex justify-between"</span><span class="s2">&gt;&lt;span</span><span class="s4">&gt;</span><span class="s3">Auto</span><span class="s2"> </span><span class="s3">CPIC</span><span class="s2">:&lt;/span&gt;&lt;span className</span><span class="s4">=</span><span class="s5">"font-mono text-indigo-600"</span><span class="s4">&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">config</span><span class="s4">.</span><span class="s2">targetCpic</span><span class="s4">}&lt;/</span><span class="s2">span&gt;&lt;/div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;/</span><span class="s3">Card</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">          </span></span><span class="s4">{</span><span class="s2">/* Step 2: Data Input */</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;</span><span class="s3">Card</span><span class="s2"> title</span><span class="s4">=</span><span class="s5">"2. 导入数据报表"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"space-y-3"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">               </span></span><span class="s4">&lt;</span><span class="s6">label className</span><span class="s4">=</span><span class="s2">"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-slate-300 rounded-lg cursor-pointer bg-slate-50 hover:bg-slate-100 transition group"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"flex flex-col items-center justify-center pt-5 pb-6"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                      </span></span><span class="s4">&lt;</span><span class="s3">Upload</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"w-8 h-8 mb-2 text-slate-400 group-hover:text-indigo-500 transition"</span><span class="s6"> /&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                      </span></span><span class="s4">&lt;</span><span class="s6">p className</span><span class="s4">=</span><span class="s2">"text-sm text-slate-500 text-center px-2"</span><span class="s4">&gt;</span><span class="s11">拖入</span><span class="s6"> </span><span class="s3">CSV</span><span class="s6"> </span><span class="s11">文件</span><span class="s4">&lt;</span><span class="s6">br/&gt;&lt;span className</span><span class="s4">=</span><span class="s2">"text-xs text-slate-400"</span><span class="s4">&gt;(</span><span class="s11">支持</span><span class="s6"> </span><span class="s3">Pmax</span><span class="s11">数据</span><span class="s8">11</span><span class="s6"> </span><span class="s11">模板</span><span class="s4">)&lt;/</span><span class="s6">span&gt;&lt;/p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s2">input </span><span class="s1">type</span><span class="s4">=</span><span class="s5">"file"</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"hidden"</span><span class="s2"> accept</span><span class="s4">=</span><span class="s5">".csv"</span><span class="s2"> onChange</span><span class="s4">={</span><span class="s2">handleFileUpload</span><span class="s4">}</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span></span><span class="s4">&lt;/</span><span class="s2">label</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">               </span></span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">               </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"text-xs text-slate-400 leading-relaxed"</span><span class="s4">&gt;</span></p>
<p class="p9"><span class="s6"><span class="Apple-converted-space">                 </span></span><span class="s2">系统将自动合并同一</span><span class="s3">Campaign</span><span class="s2">的多天数据，并取最新日期作为诊断基准。</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">               </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">             </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">&lt;/</span><span class="s3">Card</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">        </span></span><span class="s4">{</span><span class="s2">/* Right Content: Report */</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"lg:col-span-9"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">{</span><span class="s2">results</span><span class="s4">.</span><span class="s2">length </span><span class="s4">===</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"h-full flex flex-col items-center justify-center text-slate-400 min-h-[400px] border-2 border-dashed border-slate-200 rounded-2xl bg-white"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s3">Activity</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"w-16 h-16 mb-4 opacity-20"</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-lg font-medium"</span><span class="s4">&gt;</span><span class="s11">请导入数据开始诊断</span><span class="s4">&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-sm opacity-60"</span><span class="s4">&gt;</span><span class="s11">支持</span><span class="s2"> </span><span class="s3">CSV</span><span class="s2"> </span><span class="s11">格式日报表</span><span class="s4">&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">)</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"space-y-6"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"flex items-center justify-between"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                   </span></span><span class="s4">&lt;</span><span class="s6">h2 className</span><span class="s4">=</span><span class="s2">"text-xl font-bold text-slate-800"</span><span class="s4">&gt;</span><span class="s11">诊断报告</span><span class="s4">&lt;/</span><span class="s6">h2</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                   </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-sm text-slate-500"</span><span class="s4">&gt;</span><span class="s11">检测到</span><span class="s2"> </span><span class="s4">{</span><span class="s2">results</span><span class="s4">.</span><span class="s2">length</span><span class="s4">}</span><span class="s2"> </span><span class="s11">个广告系列，基准日期：</span><span class="s4">{</span><span class="s2">results</span><span class="s4">[</span><span class="s8">0</span><span class="s4">]?.</span><span class="s2">data</span><span class="s4">?.</span><span class="s2">date</span><span class="s4">}&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex gap-2"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"flex items-center gap-1 text-xs px-2 py-1 bg-red-100 text-red-700 rounded border border-red-200"</span><span class="s6">&gt;&lt;</span><span class="s3">AlertTriangle</span><span class="s6"> size</span><span class="s4">={</span><span class="s8">12</span><span class="s4">}</span><span class="s6">/&gt; </span><span class="s3">Critical</span><span class="s4">&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"flex items-center gap-1 text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded border border-orange-200"</span><span class="s6">&gt;&lt;</span><span class="s3">Info</span><span class="s6"> size</span><span class="s4">={</span><span class="s8">12</span><span class="s4">}</span><span class="s6">/&gt; </span><span class="s3">High</span><span class="s4">&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">              </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">{</span><span class="s2">results</span><span class="s4">.</span><span class="s2">map</span><span class="s4">((</span><span class="s2">res</span><span class="s4">,</span><span class="s2"> idx</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;</span><span class="s6">div key</span><span class="s4">={</span><span class="s6">idx</span><span class="s4">}</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden transition hover:shadow-md"</span><span class="s4">&gt;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">{</span><span class="s2">/* Campaign Header */</span><span class="s4">}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"bg-slate-50 px-6 py-4 border-b border-slate-100"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                    </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"flex items-start justify-between"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;</span><span class="s6">h3 className</span><span class="s4">=</span><span class="s2">"font-bold text-slate-800 flex items-center gap-2 text-lg"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">name</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">issues</span><span class="s4">.</span><span class="s2">length </span><span class="s4">===</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">CheckCircle</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"text-green-500 w-5 h-5"</span><span class="s2">/&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;/</span><span class="s2">h3</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex items-center gap-2 mt-1"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span></span><span class="s3">Age</span><span class="s4">:</span><span class="s2"> </span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">age</span><span class="s4">}</span><span class="s2"> days</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"text-xs text-slate-500 flex items-center gap-1"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;</span><span class="s3">Calendar</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">10</span><span class="s4">}</span><span class="s2"> /&gt; </span><span class="s3">Date</span><span class="s4">:</span><span class="s2"> </span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">date</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"text-right flex gap-6"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                           </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"block text-2xl font-bold text-slate-700"</span><span class="s4">&gt;{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">conversions</span><span class="s4">}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"text-xs text-slate-400 uppercase tracking-wide"</span><span class="s4">&gt;</span><span class="s3">Conv</span><span class="s4">.&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s3">MetricTrend</span><span class="s2"> current</span><span class="s4">={</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">conversions</span><span class="s4">}</span><span class="s2"> prev</span><span class="s4">={</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">yesterdayConversions</span><span class="s4">}</span><span class="s2"> label</span><span class="s4">=</span><span class="s5">"Conversions"</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                           </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                           </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"block text-2xl font-bold text-slate-700"</span><span class="s4">&gt;{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">roas</span><span class="s4">.</span><span class="s2">toFixed</span><span class="s4">(</span><span class="s8">2</span><span class="s4">)}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"text-xs text-slate-400 uppercase tracking-wide"</span><span class="s4">&gt;</span><span class="s3">ROAS</span><span class="s4">&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">                             </span></span><span class="s4">{</span><span class="s2">/* 假设昨天 ROAS 没算，暂不显示趋势，或者需要扩充数据计算 */</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                           </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span></p>
<p class="p3"><span class="s6"><span class="Apple-converted-space">                    </span></span><span class="s4">{</span><span class="s2">/* Key Metrics Bar */</span><span class="s4">}</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                    </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"grid grid-cols-6 gap-4 mt-4 pt-4 border-t border-slate-200/60"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">Cost</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"font-semibold text-slate-700"</span><span class="s4">&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cost</span><span class="s4">}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">CPA</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">={</span><span class="s5">`font-semibold </span><span class="s4">${</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpa </span><span class="s4">&gt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetCpa </span><span class="s4">?</span><span class="s2"> </span><span class="s5">'text-orange-500'</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s5">'text-slate-700'</span><span class="s4">}</span><span class="s5">`</span><span class="s4">}&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpa</span><span class="s4">}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">AOV</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">={</span><span class="s5">`font-semibold </span><span class="s4">${</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">aov </span><span class="s4">&lt;</span><span class="s2"> config</span><span class="s4">.</span><span class="s2">targetAov</span><span class="s4">/</span><span class="s8">2</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s5">'text-red-500'</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s5">'text-slate-700'</span><span class="s4">}</span><span class="s5">`</span><span class="s4">}&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">aov</span><span class="s4">}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">CPM</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"font-semibold text-slate-700"</span><span class="s4">&gt;</span><span class="s2">$</span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpm</span><span class="s4">}&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s3">MetricTrend</span><span class="s2"> current</span><span class="s4">={</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cpm</span><span class="s4">}</span><span class="s2"> prev</span><span class="s4">={</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">prevCpm</span><span class="s4">}</span><span class="s2"> label</span><span class="s4">=</span><span class="s5">"CPM"</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">Disp</span><span class="s2"> </span><span class="s3">Share</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">={</span><span class="s5">`font-semibold </span><span class="s4">${</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare </span><span class="s4">&gt;</span><span class="s2"> </span><span class="s8">50</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s5">'text-red-500'</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s5">'text-slate-700'</span><span class="s4">}</span><span class="s5">`</span><span class="s4">}&gt;{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">displayVideoCostShare</span><span class="s4">}</span><span class="s2">%&lt;/span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"text-xs text-slate-400 block"</span><span class="s4">&gt;</span><span class="s3">CVR</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                         </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"font-semibold text-slate-700"</span><span class="s4">&gt;{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">data</span><span class="s4">.</span><span class="s2">cvr</span><span class="s4">}</span><span class="s2">%&lt;/span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                       </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s7"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">{</span><span class="s10">/* Issues List */</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"p-6 space-y-4"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">{</span><span class="s2">res</span><span class="s4">.</span><span class="s2">issues</span><span class="s4">.</span><span class="s2">length </span><span class="s4">===</span><span class="s2"> </span><span class="s8">0</span><span class="s2"> </span><span class="s4">?</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                      </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"text-green-600 flex items-center gap-2 py-2 bg-green-50 px-4 rounded-lg border border-green-100"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;</span><span class="s3">CheckCircle</span><span class="s2"> size</span><span class="s4">={</span><span class="s8">20</span><span class="s4">}</span><span class="s2"> /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;</span><span class="s2">span className</span><span class="s4">=</span><span class="s5">"font-medium"</span><span class="s4">&gt;</span><span class="s11">账户表现健康，各项指标均在预期范围内。</span><span class="s4">&lt;/</span><span class="s2">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">)</span><span class="s2"> </span><span class="s4">:</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>res</span><span class="s4">.</span><span class="s2">issues</span><span class="s4">.</span><span class="s2">map</span><span class="s4">((</span><span class="s2">issue</span><span class="s4">,</span><span class="s2"> i</span><span class="s4">)</span><span class="s2"> </span><span class="s4">=&gt;</span><span class="s2"> </span><span class="s4">(</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;</span><span class="s6">div key</span><span class="s4">={</span><span class="s6">i</span><span class="s4">}</span><span class="s6"> className</span><span class="s4">=</span><span class="s2">"flex gap-4 p-4 rounded-lg bg-slate-50 border border-slate-100 items-start group hover:bg-white hover:shadow-md transition duration-200"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"mt-1 shrink-0"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">level </span><span class="s4">===</span><span class="s2"> </span><span class="s5">'CRITICAL'</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">XCircle</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"text-red-500 w-6 h-6"</span><span class="s2"> /&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">level </span><span class="s4">===</span><span class="s2"> </span><span class="s5">'HIGH'</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">AlertTriangle</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"text-orange-500 w-6 h-6"</span><span class="s2"> /&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">level </span><span class="s4">===</span><span class="s2"> </span><span class="s5">'MEDIUM'</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">Info</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"text-yellow-500 w-6 h-6"</span><span class="s2"> /&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">level </span><span class="s4">===</span><span class="s2"> </span><span class="s5">'GOOD'</span><span class="s2"> </span><span class="s4">&amp;&amp;</span><span class="s2"> </span><span class="s4">&lt;</span><span class="s3">CheckCircle</span><span class="s2"> className</span><span class="s4">=</span><span class="s5">"text-green-500 w-6 h-6"</span><span class="s2"> /&gt;</span><span class="s4">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex-1 min-w-0"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"flex items-center gap-2 mb-1"</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;</span><span class="s3">Badge</span><span class="s2"> level</span><span class="s4">={</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">level</span><span class="s4">}</span><span class="s2"> /&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"text-xs font-semibold text-slate-400 uppercase tracking-wide"</span><span class="s4">&gt;{</span><span class="s6">issue</span><span class="s4">.</span><span class="s1">module</span><span class="s4">}&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">h4 className</span><span class="s4">=</span><span class="s5">"font-bold text-slate-800 text-lg mb-1"</span><span class="s4">&gt;{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">title</span><span class="s4">}&lt;/</span><span class="s2">h4</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-sm text-slate-600 mb-3"</span><span class="s4">&gt;{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">desc</span><span class="s4">}&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                             </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;</span><span class="s2">div className</span><span class="s4">=</span><span class="s5">"grid grid-cols-1 md:grid-cols-2 gap-4"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"bg-white p-3 rounded border border-slate-100"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                                 </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"block text-xs font-bold text-slate-400 mb-1 flex items-center gap-1"</span><span class="s6">&gt;&lt;</span><span class="s3">Activity</span><span class="s6"> size</span><span class="s4">={</span><span class="s8">10</span><span class="s4">}</span><span class="s6">/&gt; </span><span class="s11">诊断分析</span><span class="s4">&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                 </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-sm text-slate-700"</span><span class="s4">&gt;{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">diagnosis</span><span class="s4">}&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;</span><span class="s6">div className</span><span class="s4">=</span><span class="s2">"bg-indigo-50 p-3 rounded border border-indigo-100"</span><span class="s4">&gt;</span></p>
<p class="p6"><span class="s6"><span class="Apple-converted-space">                                 </span></span><span class="s4">&lt;</span><span class="s6">span className</span><span class="s4">=</span><span class="s2">"block text-xs font-bold text-indigo-400 mb-1 flex items-center gap-1"</span><span class="s6">&gt;&lt;</span><span class="s3">CheckCircle</span><span class="s6"> size</span><span class="s4">={</span><span class="s8">10</span><span class="s4">}</span><span class="s6">/&gt; </span><span class="s11">建议行动</span><span class="s4">&lt;/</span><span class="s6">span</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                                 </span></span><span class="s4">&lt;</span><span class="s2">p className</span><span class="s4">=</span><span class="s5">"text-sm text-indigo-800 font-medium"</span><span class="s4">&gt;{</span><span class="s2">issue</span><span class="s4">.</span><span class="s2">action</span><span class="s4">}&lt;/</span><span class="s2">p</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                               </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                             </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span></span><span class="s4">))</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s4">))}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s4">)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s4">&lt;/</span><span class="s2">main</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s4">&lt;/</span><span class="s2">div</span><span class="s4">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s4">);</span></p>
<p class="p5"><span class="s2">}</span></p>
</body>
</html>
